% vim: set tw=78 tabstop=4 shiftwidth=4 aw ai:

\chapter{Conclusion}
\label{chapter:conclusion}

In the ever evolving context of Internet technologies in general, and
Peer-to-Peer technologies in particular, this work presented approaches on
measuring protocol parameters and providing improvements with particular focus
on performance. Considering the past decade evolution of Peer-to-Peer
technology, we have been using lessons learned in the past years to augment
existing protocols or design and implement new ones, while keeping the grip on
running realistic trials and collecting and interpreting protocol parameters.

Our measurements analysis has been centered at protocol level, with focus on
peer protocols. We didn't focus on providing an overall swarm view, but rather
a client-centric analysis. Information provided by clients had bee subject to
analysis -- protocol parameters such as download rate, upload rate, peer
connections, protocol events are at the center of the analysis. An
``individualistic'' client-centric approach was preferred against an overall
swarm-centric one.

Recognizing the immense impact of the BitTorrent protocol, most of the
measurements and improvements presented have made use of BitTorrent
architecture and specifics. BitTorrent protocol message analysis, protocol
parameters, streaming updates, tracker overlays, automating client actions
have formed the primary set of activities used in this work.

The approach used in this work, as highlighted in the chronology of the
chapters. We followed a deploy, run, analyze, evaluate, improve approach
concerning Peer-to-Peer clients and protocol messages. An infrastructure is
deployed forming the basis for nodes running within a swarm. Automation had
been employed to easily configure and run various implementations on the
infrastructure. Information is gathered in interpreted as protocol parameters,
that are subsequently subject to evaluation. With the evaluation and advices
in mind, improvements are implemented and proposed.

The infrastructure that has been used as basis for trials and experimentation
uses virtualization for efficiency reasons and easy configuration. Various
swarms and topologies have been deployed on top of the infrastructure and run.
The client-centric approach used in this work required data provided from
peers; this data has been processed into protocol parameters that at their
turn had been stored and then used for analysis, evaluation and comparison.
Various approaches on data collection and processing had been considered and
employed.

Considering the recent deep focus on streaming updates into P2P systems,
measurements, analysis and evaluation of streaming technologies had also been
presented. The local Living Lab, as part of the P2P-Next project, has been the
testing ground for live trials, involving users and streaming technologies. As
the NextShare technology provides good support for both video-on-demand and
live streaming it has been chosen as the etalon for our evaluation.

Improvements to Peer-to-Peer systems have been providing in the light of the
design and implementation of two new protocols. The first one is a tracker
overlay protocol on top of an existing BitTorrent swarm. The other is
designing a multiparty protocol at Transport level in the Linux kernel
networking stack -- relying heavily on the previous swift implementation.
These updates provide extended features or improved performance to
Peer-to-Peer systems.

The greater part of this work had been part of the P2P-Next project. The
author is thankful and appreciative towards the P2P-Next team members, that
have been working tirelessly and enthusiastically towards providing the next
generation Peer-to-Peer content delivery platform.

\section{Summary}
\label{sec:conclusion:summary}

This thesis presented the work concerning measurements and improvements at
protocol level for Peer-to-Peer systems with particular focus on the
BitTorrent protocol. Various approaches, techniques and updates are shown
throughout the chapters while generally trying to keep concepts and ideas in
order, both chronologically and logically. First chapters are concerned with
measurements and parameter evaluation, while the last chapters are focused on
actual improvements.

Thesis objective, scope and context are presented in
Chapter~\ref{chapter:intro}. The chapter is an overview of the work described
in the rest of the thesis and highlights the most important keywords and
primary focus.

Chapter~\ref{chapter:p2p-systems} is a state of the art regarding the
evolution and current challenges of Peer-to-Peer systems. The Peer-to-Peer
paradigm is presented, along with possible P2P topologies and implementations.
Focus is given to the BitTorrent protocol and streaming capabilities of P2P
systems, paving the way for contributions highlighted in later chapters.

At the basis of every work dealing with real world systems, there lies an
environment or set of environments used as testing ground. The virtualized
network infrastructure deployed for various trials is described in
Chapter~\ref{chapter:virt-infra}. Advantages and benefits of virtualization
are presented, with focus on OpenVZ -- the solution chosen as the basis for
the infrastructure implementation. Other tools and approaches are also
presented with a general focus on efficiency, automation and ease of
deployment.

Chapter~\ref{chapter:proto-measure} introduces the approaches for collecting
Peer-to-Peer measured information and the parameters at use and approaches to
parameter analysis. The two approaches used (hooking into client source code)
and collecting logs are presented within a generic logging library and client
instrumentation or context for providing log files. Parameters are stored in
an easy to access database which is easily accessed by a rendering engine.

One of the improvements highlighted in this work is the development of a
tracker overlay protocol, dubbed \textit{Tracker Swarm Unification Protocol}
(TSUP), detailed in Chapter~\ref{chapter:unified-tracker}. The new protocol is
a used between tracker such that, if coordinating swarms centered around the
same .torrent files, these swarms would be unified. Unification means that
peers in the initially two different swarms would be able to communicate with
each other and transfer data. All updates and extra communication are
tracker-centric; no modifications are required to client code.

Chapter~\ref{chapter:multiparty} presents a novel design for a multiparty
protocol at kernel level heavily based on the swift protocol. The aim is to
provide a true running multiparty protocol at Transport level; the Linux
kernel networking stack is the perfect place for such an operation. An
intermediate approach, relieving the burden of kernel programming, but still
providing the same programming interface is a raw socket-based implementation.

Trials and evaluations centered around the local Living Lab and content
distribution using Peer-to-Peer technology is presented in
Chapter~\ref{chapter:multimedia-dist}. It presents a contribution to the
libtorrent-rasterbar engine for providing streaming, and then focuses on the
inner workings and features of the NextShare technology used within the
P2P-Next project. We present the work and results involved in deploying live
trials in the Living Lab and evaluation results.

The final chapter (\textbf{Conclusions}) presents ending remarks and
highlights contributions of this work.

\section{Contributions}
\label{sec:conclusion:contributions}

\todo{infrastructure}
\todo{virtualization}
\todo{updates to existing BitTorrent clients}
\todo{logging facility}
\todo{analysis engine}
\todo{deployment and maintenance of Living Lab}
\todo{analysis and monitoring of BitTorrent streaming}
\todo{tracker overlay}
\todo{multiparty protocol}

Most of the code required for this work has made use of Python, the C
programming language, and shell scripting. Code metrics for languages and
tools that have been used throughout the project result in the below list:

\begin{itemize}
  \item \textbf{Python}: more than 20,000 lines of code
  \item \textbf{C/C++}: around 5,000 lines of code
  \item \textbf{shell scripting} and related (sed, awk): around 5,000 lines
  of code
  \item \textbf{R scripts} for processing: more than 500 lines of code
\end{itemize}

\section{Future Work}
\label{sec:conclusion:future}

\todo{improve multiparty protocol, standardisation}
\todo{enhance infrastructure -- other clients}
\todo{provide streaming vs. classical distribution comparison and advice}
\todo{define a model for virtualization adequacy to be used for simulation
environments}

\section{Publications and Talks}
\label{sec:conclusion:publications}

\subsection{Books}

\begin{itemize}
  \item Răzvan Rughiniș, Răzvan Deaconescu, George Milescu and Mircea Bardac.
  Introducere în sisteme de operare. Editura Printech, 2009, Bucharest. ISBN:
  978-606-521-386-9
  \item Răzvan Rughiniș, Răzvan Deaconescu, Andrei Ciorba and Bogdan Doinea.
  Rețele locale. Editura Printech, 2008, Bucharest. ISBN: 978-606-521-092-9
\end{itemize}

\subsection{Talks}

\begin{itemize}
  \item Performance of P2P Implementations. P2P'08 Workshop. Aachen, September
  2008
  \item Peer-to-Peer Systems. Evolution and Challenges. Ixia HiTech
  Presentations. Bucharest, April 2011
\end{itemize}

\subsection{Papers}

\begin{itemize}
  \item Mircea Bardac, George Milescu, and Răzvan Deaconescu. Monitoring a
  BitTorrent Tracker for Peer-to-Peer System Analysis. In \textit{Intelligent
  Distributed Computing}, pages 203--208, 2009
  \item Călin-Andrei Burloiu, Răzvan Deaconescu, and Nicolae Țăpuș. Design and
  Implementation of a BitTorrent Tracker Overlay for Swarm Unification. In
  \textit{International Conference on Network Services}, 2011
  \item Răzvan Deaconescu, George Milescu, Bogdan Aurelian, Răzvan Rughiniș,
  and Nicolae Țăpuș. A Virtualized Infrastructure for Automated BitTorrent
  Performance Testing and Evaluation. \textit{International Journal on
  Advances in Systems and Measurements}, 2(2\&3):236--247, 2009
  \item Răzvan Deaconescu, George Milescu, and Nicolae Țăpuș. Simulating
  Connection Dropouts in BitTorrent Environments. In \textit{EUROCON --
  International Conference on Computer as a Tool}, 2011, IEEE, pages 1-4, 2011
  \item Răzvan Deaconescu, Răzvan Rughiniș, and Nicolae Țăpuș. A BitTorrent
  Performance Evaluation Framework. \textit{Proceedings of Fifth International
  Conference of Networking and Services}, 2009
  \item Răzvan Deaconescu, Răzvan Rughiniș, and Nicolae Țăpuș. A Virtualized
  Testing Environment for BitTorrent Applications. \textit{Proceedings of
  CSCS'17}, 2009
  \item Răzvan Deaconescu, Marius Sandu-Popa, Adriana Drăghici, and Nicolae
  Țăpuș. Using Enhanced Logging for BitTorrent Swarm Analysis. In
  \textit{Proceedings of the 9th RoEduNet IEEE International Conference},
  Sibiu, 2010
  \item Răzvan Deaconescu, Marius Sandu-Popa, Adriana Drăghici, and Nicolae
  Țăpuș. BitTorrent Swarm Analysis through Automation and Enhanced Logging.
  \textit{International Journal of Computer Networks \& Communications},
  3(1):53--65, 2011
  \item Andreea Leța, Răzvan Deaconescu and Răzvan Rughiniș. Extending Packet
  Altering Capacities in Simulated Large Networks. In \textit{Proceedings of
  the 17th International Conference on Control Systems and Computer Science
  (CSCS17)}, Bucharest, 2009
  \item Marius Sandu-Popa, Adriana Drăghici, Răzvan Deaconescu, and Nicolae
  Țăpuș. A Peer-to-Peer Swarm Creation and Management Framewor. In
  \textit{Proceedings of the 1st Workshop on Software Services: Frameworks and
  Platforms}, Timișoara, Romania, 2010
  \item George Milescu, Răzvan Deaconescu, and Nicolae Țăpuș. Versatile
  Configuration and Deployment of Realistic Peer-to-Peer Scenarios. In
  \textit{International Conference on Network Services}, 2011
\end{itemize}
